Spring Cloud Feign整合了Ribbon和Eureka来提供均衡负载的HTTP客户端实现；与Ribbon不同的是，通过Feign只需要定义服务绑定接口且以声明式的方法，优雅而简单的实现了服务调用

先启动eureka-server，然后启动两个或以上的service-provider实例，最后启动feign-consumer，访问测试方法，观察控制台，调用的服务会遵循你选择的负载均衡策略，可看到负载均衡的实现

提供了七种负载均衡策略（不配置的情况默认是RoundRobinRule轮询策略）：

1.BestAvailableRule  选择一个最小的并发请求的server
2.AvailabilityFilteringRule  过滤掉那些因为一直连接失败的被标记为circuit tripped的后端server，并过滤掉那些高并发的的后端server（active connections 超过配置的阈值）
3.WeightedResponseTimeRule 根据响应时间分配一个weight，响应时间越长，weight越小，被选中的可能性越低
4.RetryRule 对选定的负载均衡策略机上重试机制
5.RoundRobinRule roundRobin方式轮询选择server
6.RandomRule 随机选择一个server
7.ZoneAvoidanceRule 复合判断server所在区域的性能和server的可用性选择server

若需要获取更详细的信息可自行搜索。

############## Hystrix #############

hystrix 当某个服务单元发生故障（类似用电器发生短路）之后，通过断路器的故障监控（类似熔断保险丝），直接切断原来的主逻辑调用，可实现服务降级（服务容错保护），线程隔离，断路器等功能。

服务降级（服务容错保护）与线程隔离是绑在一起的，当调用服务超时时，会触发服务降级；而让断路器发挥作用则需满足以下三个参数之一：是否强制开启熔断、请求总数下限、错误百分比下限。
断路器未打开之前，对于工程中示例的情况就是每个请求都会在当hystrix超时之后返回fallback，每个请求时间延迟就是近似hystrix的超时时间，如果设置为5秒，那么每个请求就都要延迟5秒才会返回。
当熔断器在10秒内发现请求总数超过20，并且错误百分比超过50%，这个时候熔断器打开。打开之后，再有请求调用的时候，将不会调用主逻辑，而是直接调用降级逻辑，这个时候就不会等待5秒之后才返回fallback。
通过断路器，实现了自动地发现错误并将降级逻辑切换为主逻辑，减少响应延迟的效果。

在断路器打开之后，处理逻辑并没有结束，我们的降级逻辑已经被成了主逻辑，那么原来的主逻辑要如何恢复呢？
对于这一问题，hystrix也为我们实现了自动恢复功能。当断路器打开，对主逻辑进行熔断之后，hystrix会启动一个休眠时间窗，在这个时间窗内，降级逻辑是临时的成为主逻辑，当休眠时间窗到期，断路器将进入半开状态，释放一次请求到原来的主逻辑上，如果此次请求正常返回，那么断路器将继续闭合，主逻辑恢复，如果这次请求依然有问题，断路器继续进入打开状态，休眠时间窗重新计时。

hystrix函数必须为public，fallback函数可以为private。两者需要返回值类型和参数相同。

hystrix函数要放在一个service中，假如分开，则fallback函数需要实现hystrix函数的接口。